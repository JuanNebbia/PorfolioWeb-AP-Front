<div *ngIf="educaciones?.length!==0">
    <app-loader *ngIf='loading'></app-loader>
    <div *ngIf="educaciones && !loading" class="card text-center background-color" id="education">
        <h3 class="section-title education-title">Formación</h3>
        <div *ngFor="let educacion of educaciones; let i = index" class="educaciones-container" >
            <div class="education-item">
                <div *ngIf="i % 2 === 0" class="line-container-left">
                    <svg id="Capa_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 87.7 239.72" id="line-icon">
                        <defs>
                            <style>.cls-1{fill:#9718a0;}.cls-2{fill:#f40be9;filter:url(#drop-shadow-1);}.cls-3{clip-path:url(#clippath);}.cls-4{fill:none;}</style>
                            <clipPath id="clippath"><rect class="cls-4" width="87.7" height="239.72"/></clipPath>
                            <filter id="drop-shadow-1" filterUnits="userSpaceOnUse"><feOffset dx="0" dy="0"/>
                            <feGaussianBlur result="blur" stdDeviation="5"/>
                            <feFlood flood-color="#000" flood-opacity=".75"/>
                            <feComposite in2="blur" operator="in"/>
                            <feComposite in="SourceGraphic"/>
                            </filter>
                        </defs>
                        <g id="Capa_1-2">
                            <g class="cls-3">
                                <path class="cls-1" d="M43.85,1031.34c-1.1,0-2-.9-2-2V-2.21c0-1.1,.9-2,2-2s2,.9,2,2V1029.34c0,1.1-.9,2-2,2Z"/>
                                <circle class="cls-2" cx="43.85" cy="119.86" r="13.12"/>
                            </g>
                        </g>
                    </svg>
                </div>
                <div class="education-card" [ngClass]="{left: i % 2 !== 0} ">
                    <p class="education-item-date">{{educacion.dateStart}} / {{educacion.dateEnd}}</p>
                    <h6 class="education-item-title">{{educacion.titulo}}</h6>
                    <p class="education-item-institution">{{educacion.institucion}}</p>
                    <button *ngIf="educacion.certificate" class="certificate-btn"><a href="{{educacion.certificate}}" target="_blank">Ver Certificado</a></button>
                </div>
                <div *ngIf="i % 2 !== 0" class="line-container-right">
                    <svg id="Capa_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 87.7 239.72" id="line-icon">
                        <defs>
                            <style>.cls-1{fill:#9718a0;}.cls-2{fill:#f40be9;filter:url(#drop-shadow-1);}.cls-3{clip-path:url(#clippath);}.cls-4{fill:none;}</style>
                            <clipPath id="clippath"><rect class="cls-4" width="87.7" height="239.72"/></clipPath>
                            <filter id="drop-shadow-1" filterUnits="userSpaceOnUse"><feOffset dx="0" dy="0"/>
                            <feGaussianBlur result="blur" stdDeviation="5"/>
                            <feFlood flood-color="#000" flood-opacity=".75"/>
                            <feComposite in2="blur" operator="in"/>
                            <feComposite in="SourceGraphic"/>
                            </filter>
                        </defs>
                        <g id="Capa_1-2">
                            <g class="cls-3">
                                <path class="cls-1" d="M43.85,1031.34c-1.1,0-2-.9-2-2V-2.21c0-1.1,.9-2,2-2s2,.9,2,2V1029.34c0,1.1-.9,2-2,2Z"/>
                                <circle class="cls-2" cx="43.85" cy="119.86" r="13.12"/>
                            </g>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
        <div *ngIf="userLogged|async as user" class="update-info-section">
            <app-add-button [btnType]="'add'" id="btn-edit-info" data-bs-toggle="modal" data-bs-target="#updateInfoModal"></app-add-button>
        </div>



        <!-- <div class="card-body" id="main-card-body">
            <h3 class="card-title title-hover education-title">Educación</h3>
            <div class="main-container">
                <div class="educaciones-container" *ngFor="let educacion of educaciones">
                    <div class="row">
                        <div class="col-3 dot-container">
                            <div><img src="assets/img/punto1.svg" alt="" id="dot-icon"></div>
                        </div>
                        <div class="col-8 col-md-4 education-info-col">
                            <div class="container-fluid" id="education-item-card">
                                <div class="row g-0 education-row">
                                    <p class="main-text" id="education-level">{{educacion.nivel}}</p>
                                    <h5 class="card-title main-title education-item-title">{{educacion.titulo}}</h5>
                                    <p class="main-text education-institution">{{educacion.institucion}}</p>
                                    <p class="main-text education-item-date">{{educacion.fechaInicio}} - {{educacion.fechaFin}} <span *ngIf="!educacion?.fechaFin">actualidad</span></p>
                                    <div class="edit-education edit-btn-container" *ngIf="userLogged|async as user">
                                        <button class="btn" id="btn-update-educacion" data-bs-toggle="modal" data-bs-target="#updateEducacionModal" data-original-title="Update" (click)="onOpenModal('update', educacion)">
                                            <i class="bi bi-pencil-fill icon-hover"></i>
                                        </button>
                                        <button class="btn" id="btn-delete-educacion" data-bs-toggle="modal" data-bs-target="#deleteEducacionModal" data-original-title="Delete" (click)="onOpenModal('delete', educacion)">
                                            <i class="bi bi bi-trash3-fill icon-hover"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-5 education-img-col">
                            <div class="education-img-container">
                                <img *ngIf="educacion.imgEducacion" src="{{educacion.imgEducacion}}" id="img-education" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <app-add-button *ngIf="userLogged|async as user" id="btn-add-educacion" data-bs-toggle="modal" data-bs-target="#addEducacionModal" (click)="onOpenModal('add')"></app-add-button>
            </div>
        </div> -->
    </div>
</div>

<div *ngIf="userLogged|async as user" class="background-color empty-section-outer-container">
    <div *ngIf="educaciones?.length==0" class="empty-section-container">
        <h3 class="card-title title-hover education-title">Educación</h3>
        <div>
            <h4 class="empty-section-title">¡No hay estudios para mostrar aun!</h4>
            <p class="empty-section-text text-muted">Click aquí abajo para agregar nuevas entradas</p>
        </div>
        <app-add-button id="btn-add-educacion" data-bs-toggle="modal" data-bs-target="#addEducacionModal" (click)="onOpenModal('add')"></app-add-button>
    </div>
</div>

<!--Add Modal -->
<div class="modal fade" id="addEducacionModal" tabindex="-1" aria-labelledby="addEducacionModal" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Añadir nueva Educación</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form #addForm="ngForm" (ngSubmit)="onAddEducacion(addForm)">
                <div class="mb-3">
                    <label for="exampleInputEmail1" class="form-label">Nivel de Estudio</label>
                    <input ngModel name="nivel" type="text" class="form-control" id="educacion-form-nivel" required>
                </div>
                <div class="mb-3">
                    <label for="exampleInputPassword1" class="form-label">Institución</label>
                    <input ngModel name="institucion" type="text" class="form-control" id="educacion-form-institucion" required>
                </div>
                <div class="mb-3">
                    <label for="exampleInputPassword1" class="form-label">Titulo</label>
                    <input ngModel name="titulo" type="text" class="form-control" id="educacion-form-titulo" placeholder="por ej. Ingenieria en sistemas" required>
                </div>
                <div class="mb-3 form-check">
                    <label class="form-check-label" for="exampleCheck1">Año de inicio</label>
                    <input ngModel name="fechaInicio" class="mx-2" type="number" min="1900" max="2099" step="1" value="2022" required>
                    <label class="form-check-label" for="exampleCheck1">Año de finalización</label>
                    <input ngModel name="fechaFin" class="mx-2" type="number" min="1900" max="2099" step="1" value="2022">
                </div>
                <div class="mb-3">
                    <label for="exampleInputPassword1" class="form-label">Link a imagen</label>
                    <input ngModel name="imgEducacion" type="text" class="form-control" id="educacion-form-img">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="submit" [disabled]="addForm.invalid" class="btn btn-primary">Guardar cambios</button>
                </div>
            </form>
        </div>
    </div>
    </div>
</div>

<!--Update Modal -->
<div class="modal fade" id="updateEducacionModal" tabindex="-1" aria-labelledby="updateEducacionModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Editar Educación: {{updateEducacion?.nivel}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form #updateForm="ngForm">
                    <div class="form-group mb-3" hidden>
                        <label for="exampleInputEmail1" class="form-label">ID</label>
                        <input ngModel="{{updateEducacion?.id}}" name="id" type="text" class="form-control" id="nivel" placeholder="por ej. universitario" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="exampleInputEmail1" class="form-label">Nivel de Estudio</label>
                        <input ngModel="{{updateEducacion?.nivel}}" name="nivel" type="text" class="form-control" id="nivel" placeholder="por ej. universitario" required>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputPassword1" class="form-label">Institución</label>
                        <input ngModel="{{updateEducacion?.institucion}}" name="institucion" type="text" class="form-control" id="institucion" placeholder="por ej. UBA" required>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputPassword1" class="form-label">Titulo</label>
                        <input ngModel="{{updateEducacion?.titulo}}" name="titulo" type="text" class="form-control" id="titulo" placeholder="por ej. Ingenieria en sistemas" required>
                    </div>
                    <div class="mb-3 form-check">
                        <label class="form-check-label" for="exampleCheck1">Año de inicio</label>
                        <input ngModel="{{updateEducacion?.fechaInicio}}" name="fechaInicio" class="mx-2" type="number" min="1900" max="2099" step="1" value="2022" required>
                        <label class="form-check-label" for="exampleCheck1">Año de finalización</label>
                        <input ngModel="{{updateEducacion?.fechaFin}}" name="fechaFin" class="mx-2" type="number" min="1900" max="2099" step="1" value="2022">
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputPassword1" class="form-label">Link a imagen</label>
                        <input ngModel="{{updateEducacion?.imgEducacion}}" name="imgEducacion" type="text" class="form-control" id="imgEducacion">
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary" (click)="onUpdateEducacion(updateForm.value)">Guardar cambios</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!--Delete Modal -->
<div class="modal fade" id="deleteEducacionModal" tabindex="-1" aria-labelledby="deleteEducacionModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Borrar Educación: {{deleteEducacion?.nivel}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>¿Seguro querés eliminar esta educación?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    No
                </button>
                <button type="button" class="btn btn-secondary" (click)="onDeleteEducacion(deleteEducacion!.id)" data-bs-dismiss="modal">
                    Sí
                </button>
            </div>
        </div>
    </div>
</div>


